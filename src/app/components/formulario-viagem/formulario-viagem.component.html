<div class="formulario-container">
  <h3>{{ isEdicao ? 'Editar Viagem' : 'Nova Viagem' }}</h3>

  <form (ngSubmit)="onSubmit()" #viagemForm="ngForm">
    <div class="form-group">
      <label for="titulo">Título da Viagem *</label>
      <input type="text" id="titulo" name="titulo" [(ngModel)]="viagem.titulo" required
        placeholder="Ex: Férias de verão" #titulo="ngModel">
      @if (titulo.invalid && titulo.touched) {
      <div class="error">Título é obrigatório</div>
      }
    </div>

    <div class="form-group">
      <label for="destino">Destino *</label>
      <input type="text" id="destino" name="destino" [(ngModel)]="viagem.destino" required
        placeholder="Ex: Rio de Janeiro, Brasil" #destino="ngModel">
      @if (destino.invalid && destino.touched) {
      <div class="error">Destino é obrigatório</div>
      }
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="dataInicio">Data de Início *</label>
        <input type="date" id="dataInicio" name="dataInicio" [(ngModel)]="dataInicioString" required
          #dataInicio="ngModel">
        @if (dataInicio.invalid && dataInicio.touched) {
        <div class="error">Data de início é obrigatória</div>
        }
      </div>

      <div class="form-group">
        <label for="dataFim">Data de Fim *</label>
        <input type="date" id="dataFim" name="dataFim" [(ngModel)]="dataFimString" required [min]="dataInicioString"
          #dataFim="ngModel">
        @if (dataFim.invalid && dataFim.touched) {
        <div class="error">Data de fim é obrigatória</div>
        }
      </div>
    </div>

    <div class="form-group">
      <label for="orcamento">Orçamento (R$) *</label>
      <input type="number" id="orcamento" name="orcamento" [(ngModel)]="viagem.orcamento" required min="0" step="0.01"
        placeholder="0,00" #orcamento="ngModel">
      @if (orcamento.invalid && orcamento.touched) {
      <div class="error">Orçamento é obrigatório e deve ser maior que zero</div>
      }
    </div>

    <div class="form-group">
      <label for="descricao">Descrição</label>
      <textarea id="descricao" name="descricao" [(ngModel)]="viagem.descricao" rows="3"
        placeholder="Descreva sua viagem (opcional)">
      </textarea>
    </div>

    <div class="form-group">
      <label for="lembretesImportantes">Lembretes Importantes</label>
      <textarea id="lembretesImportantes" name="lembretesImportantes" [(ngModel)]="viagem.lembretesImportantes" rows="3"
        placeholder="Anote lembretes importantes para esta viagem...">
      </textarea>
    </div>

    <!-- Status e Pendência -->
    <div class="form-section">
      <h4>Status</h4>

      <div class="form-group">
        <div class="checkbox-group">
          <input type="checkbox" id="temPendencia" name="temPendencia" [(ngModel)]="viagem.temPendencia"
            class="form-checkbox">
          <label for="temPendencia" class="checkbox-label">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10" />
              <path d="M12 8v8" />
              <path d="M8 12h8" />
            </svg>
            Marcar como pendente
          </label>
        </div>
      </div>

      @if (viagem.temPendencia) {
      <div class="form-group">
        <label for="motivoPendencia">Motivo da Pendência</label>
        <textarea id="motivoPendencia" name="motivoPendencia" [(ngModel)]="viagem.motivoPendencia" rows="3"
          placeholder="Descreva o motivo da pendência..." class="form-control">
        </textarea>
      </div>
      }
    </div>

    <div class="form-actions">
      <button type="button" class="btn-cancelar" (click)="onCancelar()">
        Cancelar
      </button>
      <button type="submit" class="btn-salvar" [disabled]="viagemForm.invalid">
        {{ isEdicao ? 'Atualizar Viagem' : 'Salvar Viagem' }}
      </button>
    </div>
  </form>
</div>