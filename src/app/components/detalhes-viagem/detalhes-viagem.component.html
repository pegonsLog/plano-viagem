<div class="detalhes-viagem">
  @if (viagem(); as viagemData) {
  <!-- Header da Viagem -->
  <div class="viagem-header">
    <div class="header-actions">
      <button class="btn-voltar" (click)="voltarParaLista()">
        <app-icon name="arrow-left" [size]="20"></app-icon>
        Voltar
      </button>

      <div class="actions-group">
        <button class="btn-relatorio" (click)="verRelatorio()">
          <app-icon name="document-text" [size]="20"></app-icon>
          Relatório
        </button>

        <button class="btn-tabela" (click)="verTabelaDias()">
          <app-icon name="table-cells" [size]="20"></app-icon>
          Tabela
        </button>
      </div>
    </div>

    <div class="viagem-info">
      <h1><app-icon name="globe-alt" [size]="32"></app-icon> {{ viagemData.titulo }}</h1>
      <div class="viagem-meta">
        <p><app-icon name="map-pin" [size]="18"></app-icon> <strong>Destino:</strong> {{ viagemData.destino }}</p>
        <p><app-icon name="calendar" [size]="18"></app-icon> <strong>Período:</strong> {{ formatarData(viagemData.dataInicio) }} - {{ formatarData(viagemData.dataFim) }}</p>
        <p><app-icon name="clock" [size]="18"></app-icon> <strong>Duração:</strong> {{ totalDias() }} dias</p>
        <p><app-icon name="currency-dollar" [size]="18"></app-icon> <strong>Orçamento:</strong> {{ formatarMoeda(viagemData.orcamento) }}</p>
        @if (viagemData.descricao) {
        <p><strong>Descrição:</strong> {{ viagemData.descricao }}</p>
        }
      </div>
    </div>
  </div>

  <!-- Resumo dos Dias -->
  <div class="resumo-dias">
    <h2><app-icon name="calendar" [size]="24"></app-icon> Itinerário da Viagem</h2>
    <div class="resumo-stats">
      <div class="stat">
        <span class="stat-number">{{ totalDias() }}</span>
        <span class="stat-label">Total de dias</span>
      </div>
      <div class="stat">
        <span class="stat-number">{{ diasComDetalhes() }}</span>
        <span class="stat-label">Incluídos</span>
      </div>
      <div class="stat">
        <span class="stat-number">{{ diasSemDetalhes() }}</span>
        <span class="stat-label">Não incluídos</span>
      </div>
      <div class="stat">
        <span class="stat-number">{{ diasConcluidos() }}</span>
        <span class="stat-label">Concluídos</span>
      </div>
      <div class="stat">
        <span class="stat-number">{{ diasComPendencia() }}</span>
        <span class="stat-label">Com pendências</span>
      </div>
    </div>
  </div>

  <!-- Lista de Dias -->
  <app-lista-dias [diasCalculados]="diasCalculados()" [viagemId]="viagemData.id">
  </app-lista-dias>
  } @else {
  <div class="loading">
    <app-icon name="arrow-path" [size]="32" color="#6b7280"></app-icon>
    <p>Carregando detalhes da viagem...</p>
  </div>
  }
</div>
